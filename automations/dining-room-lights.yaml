# - id: '1575990406554'
#   alias: Light:Dining Room:Toggle
#   description: ''
#   trigger:
#   - entity_id: sensor.rfb_button
#     platform: state
#     to: '1712152'
#   - entity_id:
#     - automation.christmas_lights
#     - automation.party_lights
#     platform: state
#     attribute: current
#     to: 0
#   mode: single
#   condition:
#   - condition: state
#     entity_id: binary_sensor.active
#     state: 'on'
#   action:
#   - entity_id: input_boolean.party_lights,input_boolean.christmas_lights
#     service: input_boolean.turn_off
#   - entity_id: light.dining_room_lights
#     service: light.toggle
#     data:
#       brightness: 255
#       color_temp: 280
# - id: '1576515841194'
#   alias: Dining Room Lights Off
#   description: ''
#   trigger:
#   - event: sunrise
#     platform: sun
#   condition: []
#   action:
#   - entity_id: input_boolean.christmas_lights
#     service: input_boolean.turn_off
#   - delay: 00:00:10
#   - service: script.turn_on
#     data:
#       entity_id: script.1576604653358
#   - service: light.turn_off
#     data:
#       entity_id: light.dining_room_lights,light.light_familyroom_1,light.music_room_light

# - id: '20201106230801'
#   alias: Light FX Off
#   trigger:
#   - entity_id:
#     - input_boolean.christmas_lights
#     - input_boolean.party_lights
#     platform: state
#     to: 'off'
#   action:
#   - data:
#       brightness: 255
#       color_temp: 280
#       entity_id: light.dining_room_lights,light.music_room_light,light.light_familyroom_1
#     service: light.turn_on
# - id: '1582675757394'
#   alias: Light:Dining Room:Rollershutters
#   description: ''
#   trigger:
#   - entity_id: cover.dining_room_rollershutter
#     platform: state
#     to: open
#   condition:
#   - condition: and
#     conditions:
#     - before: sunset
#       condition: sun
#     - after: sunrise
#       condition: sun
#   action:
#   - service: light.turn_off
#     entity_id: light.dining_room_lights,light.music_room_light
#     data: {}
  # '1575967544396':
  #   alias: Christmas Lights Loop
  #   sequence:
  #   - delay: 00:00:05
  #   - condition: state
  #     entity_id: input_boolean.christmas_lights_state
  #     state: 'on'
  #   - entity_id: script.1575907804253
  #     service: script.turn_on
# - id: '2021052712481'
  # alias: Light:Dining Room:PIR
  # description: 'Trigger light from PIR'
  # mode: restart
  # trigger:
  # - entity_id: binary_sensor.family_room
  #   platform: state
  #   to: 'on'
  # - entity_id: binary_sensor.media_room
  #   platform: state
  #   to: 'on'
  # - entity_id: sensor.rfb_button
  #   platform: state
  #   to: '14330700'
  # condition:
  # - condition: state
  #   entity_id: binary_sensor.active
  #   state: 'on'
  # - condition: and
  #   conditions:
  #   - condition: time
  #     after: "07:00:00"
  #   - condition: sun
  #     before: sunset
  #   - condition: state
  #     entity_id: group.family
  #     state: home
  #   - condition: state
  #     entity_id: cover.dining_room_rollershutter
  #     state: closed
  # action:
  # - entity_id: light.dining_room_lights
  #   service: light.turn_on
  #   data:
  #     brightness: 255
  #     color_temp: 280
  # - delay: '00:15:00'
  # - service: light.turn_off
  #   entity_id: light.dining_room_lights
- id: '1626717744919'
  alias: Light:Dining Room:PIR
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.rfb_button
    to: '1712152'
    id: Button
  - platform: state
    entity_id: binary_sensor.family_room,binary_sensor.media_room
    id: PIR
    to: 'on'
  - platform: event
    event_type: timer.finished
    event_data:
      entity_id: timer.dining_room_pir
    id: Timer
  condition:
  - condition: state
    entity_id: binary_sensor.active
    state: 'on'
  - condition: state
    entity_id: group.family
    state: home
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: Timer
      - condition: state
        entity_id: input_boolean.christmas_lights,input_boolean.party_lights
        state: 'off'
      - condition: state
        entity_id: light.dining_room_lights
        state: 'on'
      - condition: numeric_state
        entity_id: light.dining_room_lights
        attribute: brightness
        below: '100'
      sequence:
      - service: light.turn_off
        data:
          transition: 30
        target:
          entity_id: light.dining_room_lights
    - conditions:
      - condition: trigger
        id: PIR
      - condition: state
        entity_id: input_boolean.christmas_lights,input_boolean.party_lights
        state: 'off'
      sequence:
      - choose:
        - conditions:
          - condition: state
            entity_id: light.dining_room_lights,light.family_room_lights
            state: 'off'
          - condition: time
            after: 07:30:00
            before: '20:30:00'
          - condition: state
            entity_id: cover.dining_room_rollershutter
            state: closed
          sequence:
          - service: light.turn_on
            data:
              color_temp: 280
              brightness_pct: 99
            target:
              entity_id: light.dining_room_lights
          - service: timer.start
            data:
              duration: '0'
            target:
              entity_id: timer.dining_room_pir
        - conditions:
          - condition: state
            entity_id: timer.dining_room_pir
            state: active
          sequence:
          - service: timer.start
            data:
              duration: '0'
            target:
              entity_id: timer.dining_room_pir
        default: []
    - conditions:
      - condition: trigger
        id: Button
      - condition: state
        entity_id: light.dining_room_lights
        state: 'on'
      - condition: numeric_state
        entity_id: light.dining_room_lights
        attribute: brightness
        above: '99'
      sequence:
      - service: light.turn_off
        target:
          entity_id: light.dining_room_lights
    default:
    - service: light.turn_on
      data:
        color_temp: 280
        brightness: 255
      target:
        entity_id: light.dining_room_lights
  mode: restart