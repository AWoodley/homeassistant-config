# - id: '1577291453719'
#   alias: Light:Family Room Flood:Toggle
#   description: ''
#   trigger:
#   - entity_id: sensor.rfb_button
#     platform: state
#     to: '1712146'
#   - entity_id:
#     - automation.christmas_lights
#     - automation.party_lights
#     platform: state
#     attribute: current
#     to: 0
#   mode: single
#   condition:
#   - condition: state
#     entity_id: binary_sensor.active
#     state: 'on'
#   action:
#   - entity_id: input_boolean.party_lights,input_boolean.christmas_lights
#     service: input_boolean.turn_off
#   - entity_id: light.family_room_lights
#     service: light.toggle
#     data:
#       brightness: 255
#       color_temp: 280
#   - delay: 00:15:00
#   - entity_id: input_boolean.family_room_pir
#     service: >
#       {% if is_state('light.light_familyroom_1', 'on') %}
#       input_boolean.turn_on
#       {% else %}
#       input_boolean.turn_off
#       {% endif %}
- id: '20201208000301'
  alias: Light:Christmas Tree:Off
  description: ''
  trigger:
  - entity_id:
    - automation.christmas_lights
    platform: state
    attribute: current
    to: 0
  mode: single
  condition:
  - condition: state
    entity_id: binary_sensor.active
    state: 'on'
  action:
  - entity_id: light.light_christmas_1
    service: light.turn_off
# - id: '2020121423211'
  # alias: Light:Family Room FLood:PIR
  # description: 'Trigger light from PIR'
  # mode: restart
  # trigger:
  # - entity_id: binary_sensor.family_room
  #   platform: state
  #   to: 'on'
  # - entity_id: binary_sensor.media_room
  #   platform: state
  #   to: 'on'
  # - entity_id: sensor.rfb_button
  #   platform: state
  #   to: '14330700'
  # condition:
  # - condition: state
  #   entity_id: binary_sensor.active
  #   state: 'on'
  # - condition: or
  #   conditions:
  #   - before: sunrise
  #     condition: sun
  #   - after: sunset
  #     condition: sun
  # - condition: state
  #   entity_id: input_boolean.family_room_pir
  #   state: 'on'
  # - condition: state
  #   entity_id: light.dining_room_lights
  #   state: 'off'
  # action:
  # - service: light.turn_on
  #   entity_id: light.light_familyroom_1
  #   data:
  #     brightness: 60
  #     color_temp: 280
  # - delay: '00:05:00'
  # - condition: state
  #   entity_id: input_boolean.family_room_pir
  #   state: 'on'
  # - service: light.turn_off
  #   entity_id: light.light_familyroom_1
# - id: '1584896652882'
#   alias: Light:Family Room Flood:PIR:On
#   description: ''
#   trigger:
#   - entity_id: binary_sensor.family_room
#     platform: state
#     to: 'on'
#   condition:
#   - condition: or
#     conditions:
#     - before: sunrise
#       condition: sun
#     - after: sunset
#       condition: sun
#   - condition: state
#     entity_id: input_boolean.family_room_pir
#     state: 'on'
#   action:
#   - service: light.turn_on
#     entity_id: light.light_familyroom_1
#     data:
#       brightness: 60
#       color_temp: 280
# - id: '1584898261946'
#   alias: Light:Family Room Flood:PIR:Off
#   description: ''
#   trigger:
#   - entity_id: binary_sensor.family_room
#     for: 00:05:00
#     platform: state
#     to: 'off'
#   condition:
#   - condition: or
#     conditions:
#     - before: sunrise
#       condition: sun
#     - after: sunset
#       condition: sun
#   - condition: state
#     entity_id: input_boolean.family_room_pir
#     state: 'on'
#   action:
#   - service: light.turn_off
#     entity_id: light.light_familyroom_1
- id: '1626716617185'
  alias: Light:Family Room Flood:PIR
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.rfb_button
    to: '1712146'
    id: Button
  - platform: state
    entity_id: binary_sensor.family_room,binary_sensor.media_room
    id: PIR
    to: 'on'
  - platform: event
    event_type: timer.finished
    event_data:
      entity_id: timer.passage_pir
    id: Timer
  condition:
  - condition: state
    entity_id: binary_sensor.active
    state: 'on'
  - condition: state
    entity_id: group.family
    state: home
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: Timer
      - condition: state
        entity_id: input_boolean.christmas_lights,input_boolean.party_lights
        state: 'off'
      - condition: state
        entity_id: light.light_familyroom_1
        state: 'on'
      - condition: numeric_state
        entity_id: light.light_familyroom_1
        attribute: brightness
        below: '100'
      sequence:
      - service: light.turn_off
        data:
          transition: 15
        target:
          entity_id: light.light_familyroom_1
    - conditions:
      - condition: trigger
        id: PIR
      - condition: state
        entity_id: input_boolean.christmas_lights,input_boolean.party_lights
        state: 'off'
      sequence:
      - choose:
        - conditions:
          - condition: state
            entity_id: light.dining_room_lights,light.family_room_lights
            state: 'off'
          - condition: time
            after: '20:30:00'
            before: 07:30:00
          sequence:
          - service: light.turn_on
            target:
              entity_id: light.light_familyroom_1
            data:
              color_temp: 370
              brightness: 25
          - service: timer.start
            target:
              entity_id: timer.family_room_pir
            data:
              duration: 00:05:00
        - conditions:
          - condition: state
            entity_id: timer.family_room_pir
            state: active
          sequence:
          - service: timer.start
            data:
              duration: '0'
            target:
              entity_id: timer.family_room_pir
        default: []
    - conditions:
      - condition: trigger
        id: Button
      - condition: state
        entity_id: light.family_room_lights
        state: 'on'
      - condition: numeric_state
        entity_id: light.family_room_lights
        attribute: brightness
        above: '99'
      sequence:
      - service: light.turn_off
        target:
          entity_id: light.family_room_lights
    default:
    - service: light.turn_on
      data:
        color_temp: 280
        brightness: 255
      target:
        entity_id: light.family_room_lights
  mode: restart